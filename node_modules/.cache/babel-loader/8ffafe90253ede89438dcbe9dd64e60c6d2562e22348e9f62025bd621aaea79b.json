{"ast":null,"code":"import _regeneratorRuntime from\"/Users/supriyasingh/Desktop/cloud-cafe/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"/Users/supriyasingh/Desktop/cloud-cafe/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/supriyasingh/Desktop/cloud-cafe/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/supriyasingh/Desktop/cloud-cafe/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import\"./App.css\";import{useState}from\"react\";import Search from\"./components/search/search\";import CurrentWeather from\"./components/current-weather/current-weather\";import Forecast from\"./components/forecast/forecast\";import{WEATHER_API_URL,WEATHER_API_KEY}from\"./api\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),currentWeather=_useState2[0],setCurrentWeather=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),forecast=_useState4[0],setForecast=_useState4[1];var handleOnSearchChange=function handleOnSearchChange(searchData){var _searchData$value$spl=searchData.value.split(\" \"),_searchData$value$spl2=_slicedToArray(_searchData$value$spl,2),lat=_searchData$value$spl2[0],lon=_searchData$value$spl2[1];var currentWeatherFetch=fetch(\"\".concat(WEATHER_API_URL,\"/weather?lat=\").concat(lat,\"&lon=\").concat(lon,\"&appid=\").concat(WEATHER_API_KEY,\"&units=metric\"));var forecastFetch=fetch(\"\".concat(WEATHER_API_URL,\"/forecast?lat=\").concat(lat,\"&lon=\").concat(lon,\"&appid=\").concat(WEATHER_API_KEY,\"&units=metric\"));Promise.all([currentWeatherFetch,forecastFetch]).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(response){var weatherResponse,forecastResponse;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return response[0].json();case 2:weatherResponse=_context.sent;_context.next=5;return response[1].json();case 5:forecastResponse=_context.sent;setCurrentWeather(_objectSpread({city:searchData.label},weatherResponse));setForecast(_objectSpread({city:searchData.label},forecastResponse));case 8:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}()).catch(function(err){return console.log(err);});};console.log(currentWeather);console.log(forecast);return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(Search,{onSearchChange:handleOnSearchChange}),currentWeather&&/*#__PURE__*/_jsx(CurrentWeather,{data:currentWeather}),forecast&&/*#__PURE__*/_jsx(Forecast,{data:forecast})]});}// we use RapidAPI for cloud cafe.\nexport default App;","map":{"version":3,"names":["useState","Search","CurrentWeather","Forecast","WEATHER_API_URL","WEATHER_API_KEY","App","currentWeather","setCurrentWeather","forecast","setForecast","handleOnSearchChange","searchData","value","split","lat","lon","currentWeatherFetch","fetch","forecastFetch","Promise","all","then","response","json","weatherResponse","forecastResponse","city","label","catch","err","console","log"],"sources":["/Users/supriyasingh/Desktop/cloud-cafe/src/App.js"],"sourcesContent":["import \"./App.css\";\nimport { useState } from \"react\";\nimport Search from \"./components/search/search\";\nimport CurrentWeather from \"./components/current-weather/current-weather\";\nimport Forecast from \"./components/forecast/forecast\"\nimport { WEATHER_API_URL, WEATHER_API_KEY } from \"./api\";\n\nfunction App() {\n  const [currentWeather, setCurrentWeather] = useState(null);\n  const [forecast, setForecast] = useState(null);\n\n  const handleOnSearchChange = (searchData) => {\n    const [lat, lon] = searchData.value.split(\" \");\n    const currentWeatherFetch = fetch(\n      `${WEATHER_API_URL}/weather?lat=${lat}&lon=${lon}&appid=${WEATHER_API_KEY}&units=metric`\n    );\n    const forecastFetch = fetch(\n      `${WEATHER_API_URL}/forecast?lat=${lat}&lon=${lon}&appid=${WEATHER_API_KEY}&units=metric`\n    );\n\n    Promise.all([currentWeatherFetch, forecastFetch])\n      .then(async (response) => {\n        const weatherResponse = await response[0].json();\n        const forecastResponse = await response[1].json();\n\n        setCurrentWeather({ city: searchData.label, ...weatherResponse });\n        setForecast({ city: searchData.label, ...forecastResponse });\n      })\n      .catch((err) => console.log(err));\n  };\n\n  console.log(currentWeather);\n  console.log(forecast);\n\n  return (\n    <div className=\"container\">\n      <Search onSearchChange={handleOnSearchChange} />\n      {currentWeather && <CurrentWeather data={currentWeather} />}\n      {forecast && <Forecast data={forecast }/>}\n    </div>\n  );\n}\n// we use RapidAPI for cloud cafe.\n  \nexport default App;\n"],"mappings":"+fAAA,MAAO,WAAW,CAClB,OAASA,QAAQ,KAAQ,OAAO,CAChC,MAAOC,OAAM,KAAM,4BAA4B,CAC/C,MAAOC,eAAc,KAAM,8CAA8C,CACzE,MAAOC,SAAQ,KAAM,gCAAgC,CACrD,OAASC,eAAe,CAAEC,eAAe,KAAQ,OAAO,CAAC,wFAEzD,QAASC,IAAG,EAAG,CACb,cAA4CN,QAAQ,CAAC,IAAI,CAAC,wCAAnDO,cAAc,eAAEC,iBAAiB,eACxC,eAAgCR,QAAQ,CAAC,IAAI,CAAC,yCAAvCS,QAAQ,eAAEC,WAAW,eAE5B,GAAMC,qBAAoB,CAAG,QAAvBA,qBAAoB,CAAIC,UAAU,CAAK,CAC3C,0BAAmBA,UAAU,CAACC,KAAK,CAACC,KAAK,CAAC,GAAG,CAAC,gEAAvCC,GAAG,2BAAEC,GAAG,2BACf,GAAMC,oBAAmB,CAAGC,KAAK,WAC5Bd,eAAe,yBAAgBW,GAAG,iBAAQC,GAAG,mBAAUX,eAAe,kBAC1E,CACD,GAAMc,cAAa,CAAGD,KAAK,WACtBd,eAAe,0BAAiBW,GAAG,iBAAQC,GAAG,mBAAUX,eAAe,kBAC3E,CAEDe,OAAO,CAACC,GAAG,CAAC,CAACJ,mBAAmB,CAAEE,aAAa,CAAC,CAAC,CAC9CG,IAAI,4FAAC,iBAAOC,QAAQ,+KACWA,SAAQ,CAAC,CAAC,CAAC,CAACC,IAAI,EAAE,QAA1CC,eAAe,qCACUF,SAAQ,CAAC,CAAC,CAAC,CAACC,IAAI,EAAE,QAA3CE,gBAAgB,eAEtBlB,iBAAiB,gBAAGmB,IAAI,CAAEf,UAAU,CAACgB,KAAK,EAAKH,eAAe,EAAG,CACjEf,WAAW,gBAAGiB,IAAI,CAAEf,UAAU,CAACgB,KAAK,EAAKF,gBAAgB,EAAG,CAAC,sDAC9D,+DAAC,CACDG,KAAK,CAAC,SAACC,GAAG,QAAKC,QAAO,CAACC,GAAG,CAACF,GAAG,CAAC,GAAC,CACrC,CAAC,CAEDC,OAAO,CAACC,GAAG,CAACzB,cAAc,CAAC,CAC3BwB,OAAO,CAACC,GAAG,CAACvB,QAAQ,CAAC,CAErB,mBACE,aAAK,SAAS,CAAC,WAAW,wBACxB,KAAC,MAAM,EAAC,cAAc,CAAEE,oBAAqB,EAAG,CAC/CJ,cAAc,eAAI,KAAC,cAAc,EAAC,IAAI,CAAEA,cAAe,EAAG,CAC1DE,QAAQ,eAAI,KAAC,QAAQ,EAAC,IAAI,CAAEA,QAAU,EAAE,GACrC,CAEV,CACA;AAEA,cAAeH,IAAG"},"metadata":{},"sourceType":"module","externalDependencies":[]}